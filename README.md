# plarium-test-task
Репозиторий с выполненным тестовым заданием от компании Plarium.
Состоит из двух частей: консольное приложение и веб-сервис.

## plarium-client
Консольное приложение прослушивает заданный путь в файловой системе на наличие новых файлов.
Обрабатываются также уже существующие по данному пути файлы. По требованию в задании приложение
написано на чистом JAVA SDK без дополнительных библиотек.

В файлах ожидается по одному объекту JSON на строке, каждый из которых содержит поле `type` и 
произвольное число других полей.
Пустые строки и строки, не содержащие подстроку `"type"`, отфильтровываются, однако полная проверка
на соответствие строки формату JSON на строконе клиента не производится.

Данные из файлов считываются и отправляются на сервер по протоколу HTTP в виде массива JSON объектов, 
максимальное число одновременно пересылаемых объектов регулируется параметром запуска.

Пример запуска:
`java com.plarium.client.ConsoleJsonLoader /Users/MBogda/plarium/ --batch_size 2`

Также параметрами запуска можно задать:

1. Адрес HTTP-сервера.
1. Точку входа на сервер.
1. Таймаут ожидания соединения.
1. Количество попыток переотправки в случае отсутсвия соединения.

Что хотелось сделать, но не успел:

1. Скрипты запуска и остановки приложения в фоне (с возвращением управления терминалу).
1. Многопоточность (для устранения разрыва во времени между концом обработки существующих
файлов и началом обработки новых файлов, а также возможно для параллельной отправки объектов
и параллельного чтения разных файлов).
1. Тесты (формально нельзя использовать дополнительные библиотеки, но, думаю, библиотека 
для тестирования была бы не в счёт - однако времени не хватило).
1. Документация на классы и методы (хочу добавить 23.12).

## plarium-service
Веб-сервис получает массив вышеобозначенных JSON-объектов, группирует их по типам и 
сохраняет в файлы в следующую структуру: `/root/<type>/<date>`,
где `<type>` - тип объекта (из поля `"type"`),
`<date>` - дата загрузки объекта в формате `yyyy-mm-dd`.

Объекты сохраняются в модифицированном виде (т.е. не гарантируется порядок следования ключей 
и пробельных символов), т.к. при получении происходит валидация JSON-объекта и далее запись
происходит в минифицированном виде. 

Т.к. ограничений на формат веб-сервиса не было, при разработке данного сервиса не было стремления
сделать его RESTfull сервисом.

Для проверки функциональности реализованы тесты, проверяющие работу сервиса начиная от получения
распарсенных данных и заканчивая проверкой ответа на запрос.

Что хотелось сделать, но не успел:
1. Чтение параметров не из класса, содержащего константы, а из конфигурационного файла.
1. Документация на классы и методы (хочу добавить 23.12).
